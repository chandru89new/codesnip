<!doctype html>
<html lang='en-us'>
<head>
	<meta charset=utf-8>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Better Masonry test</title>
	<style type="text/css">
		.parent > .child {width: 200px; margin-bottom: 15px;}
		.parent > .child > .imageContainer img {width: 100%; visibility: hidden;}
	</style>
</head>
<body>
<div class="parent">

	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/500/700" alt="" />
		</div>
	</div>

	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/200/200" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/400/600" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/500/100" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/300/400" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/250/500" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/100/100" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/200/300" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/100/500" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/300/500" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/150/250" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/200/450" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/350/200" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/600/700" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/500/700" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/200/400" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/100/500" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/500/200" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/200/300" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/250/550" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/200/600" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/150/350" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/700/400" alt="" />
		</div>
	</div>
	
	<div class="child">
		<div class="imageContainer">
			<img src="http://placekitten.com/500/700" alt="" />
		</div>
	</div>

	<div class="append" style="position: fixed; bottom: 10px; right: 10px; font-family: sans-serif; padding: 10px 15px; background: black; color: white;">Append</div>
	


</div>

<script src="jquery.min.js"></script>
<script src="msnry.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		
		$('.parent').masonry({
			itemSelector: '.child',
			columnWidth: 200,
			percentPosition: true,
			gutter: 15,
		});
		
		var masonryOnLoop = setInterval(function(){
			$('.parent').masonry('reloadItems').masonry('layout');
			console.log('masonry-called');
			$('.parent').find('img').css({"visibility":"visible"});
		}, 2000);

		// clearInterval


		// append content
		var appendContent = '<div class="child">' +
		'<div class="imageContainer">' +
			'<img src="http://placekitten.com/550/250" alt="" />' +
		'</div>' +
	'</div>' +
	
	'<div class="child">' +
		'<div class="imageContainer">' +
			'<img src="http://placekitten.com/600/200" alt="" />' +
		'</div>' +
	'</div>' +
	
	'<div class="child">' +
		'<div class="imageContainer">' +
			'<img src="http://placekitten.com/350/150" alt="" />' +
		'</div>' +
	'</div>' +
	
	'<div class="child">' +
		'<div class="imageContainer">' +
			'<img src="http://placekitten.com/400/700" alt="" />' +
		'</div>' +
	'</div>' +
	
	'<div class="child">' +
		'<div class="imageContainer">' +
			'<img src="http://placekitten.com/700/500" alt="" />' +
		'</div>' +
	'</div>';

	$('.append').click(function(){
		$('.parent').append(appendContent);
		console.log('clicked');
	});
		
	});
</script>
</body>
</html>